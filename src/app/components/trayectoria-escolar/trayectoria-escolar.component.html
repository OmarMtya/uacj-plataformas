<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Tab 1
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Tab 1</ion-title>
    </ion-toolbar>
  </ion-header>
  <div class="container mx-auto p-2 pb-16">

    <div #containerRubros class="flex flex-row overflow-x-auto mb-4 pb-2 container-scrollbar">
      <div *ngFor="let rubro of rubrosDisponibles; index as index"
        class="px-5 text-gray-300 font-thin border-b border-gray-200 pb-2" [ngClass]="{'activo': index == 0}"
        (click)="localizarRubro(rubroElement, rubro)" #rubroElement>
        {{rubro | titlecase}}
      </div>
    </div>

    <ng-container *ngIf="consulta">
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-3 gap-6">

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1" [ngClass]="[tarjeta.clase]"
          *ngFor="let tarjeta of consulta.tarjetas">
          <ion-icon class="text-2xl" [name]="tarjeta.icono"></ion-icon>
          <div class="font-bold tracking-wide">
            {{tarjeta.titulo}}
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{tarjeta.valor}}
          </div>
        </div>

        <!-- <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 yellow-card sm:col-span-2">
          <ion-icon class="text-2xl" name="location-sharp"></ion-icon>
          <div class="font-bold tracking-wide">
            Campus
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{form.controls.campus.value}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 red-card">
          <ion-icon class="text-2xl" name="woman"></ion-icon>
          <div class="font-bold tracking-wide">
            Nuevo ingreso mujeres
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.ni_mujeres}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 blue-card">
          <ion-icon class="text-2xl" name="man"></ion-icon>
          <div class="font-bold tracking-wide">
            Nuevo ingreso hombres
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.ni_hombres}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 green-card sm:col-span-2">
          <ion-icon class="text-2xl" name="person-add"></ion-icon>
          <div class="font-bold tracking-wide">
            Nuevo ingreso total
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.ni_total}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 purple-card">
          <ion-icon class="text-2xl" name="woman"></ion-icon>
          <div class="font-bold tracking-wide">
            Reingreso mujeres
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.ri_mujeres}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 orange-card">
          <ion-icon class="text-2xl" name="man"></ion-icon>
          <div class="font-bold tracking-wide">
            Reingreso hombres
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.ri_hombres}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 red-card">
          <ion-icon class="text-2xl" name="refresh"></ion-icon>
          <div class="font-bold tracking-wide">
            Reingreso total
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.ri_total}}
          </div>
        </div>

        <div class="card shadow-md rounded-lg p-4 grid grid-rows-3 gap-1 yellow-card">
          <ion-icon class="text-2xl" name="people"></ion-icon>
          <div class="font-bold tracking-wide">
            Matrículas totales
          </div>
          <div class="font-bold text-2xl number flex items-end justify-end">
            {{consulta.total.total_matricula}}
          </div>
        </div> -->


      </div>

      <section class="container mx-auto mt-4 text-xs">
        <div class="w-full mb-8 overflow-hidden rounded-lg shadow-lg">
          <div class="w-full overflow-auto">
            <table class="w-full">
              <thead>
                <tr
                  class="font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600">
                  <th class="px-4 py-3">Programa</th>
                  <th class="px-4 py-3">Campus</th>
                  <th class="px-4 py-3">Nuevo ingreso Mujeres</th>
                  <th class="px-4 py-3">Nuevo ingreso hombres</th>
                  <th class="px-4 py-3">Nuevo ingreso total</th>
                  <th class="px-4 py-3">Reingreso Mujeres</th>
                  <th class="px-4 py-3">Reingreso hombres</th>
                  <th class="px-4 py-3">Reingreso total</th>
                  <th class="px-4 py-3">Mujeres total</th>
                  <th class="px-4 py-3">Hombres total</th>
                  <th class="px-4 py-3">Matrículas totales</th>
                  <th class="px-4 py-3">Nivel</th>
                </tr>
              </thead>
              <tbody class="bg-white">
                <tr class="text-gray-700" *ngFor="let row of consulta.rows_tablas">
                  <td class="px-4 py-3 border">
                    {{row.serie}}
                  </td>
                  <td class="px-4 py-3 text-ms font-semibold border">
                    <span class="px-2 py-1 font-semibold leading-tight text-gray-700 rounded-sm bg-green-100"
                      [ngClass]="{'bg-purple-100': row.campus == 'IADA', 'bg-green-100': row.campus == 'IIT', 'bg-blue-100': row.campus == 'ICB', 'bg-red-100': row.campus == 'ICSA'}">
                      {{row.campus}}
                    </span>
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.ni_mujeres}}
                  </td>
                  <td class="px-4 py-3 text-sm border">
                    {{row.ni_hombres}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.ni_total}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.ri_mujeres}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.ri_hombres}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.ri_total}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.total_mujeres}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.total_hombres}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.total_matricula}}
                  </td>
                  <td class="px-4 py-3 text-xs border">
                    {{row.nivel}}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </ng-container>

  </div>


  <div class="fixed bottom-0 right-0 m-2">
    <div class="relative">
      <div class="bg-blue-500 rounded-lg px-4 py-2 w-52 mb-14 shadow-lg animate__animated animate__fadeIn"
        [ngClass]="{'block': showFilters, 'hidden': !showFilters}">
        <form [formGroup]="form">
          <select formControlName="periodo">
            <option disabled selected [value]="null">Periodo</option>
            <option *ngFor="let periodo of periodos" [value]="periodo.desc">{{ periodo.desc }}</option>
          </select>
          <select formControlName="campus">
            <option disabled selected [value]="null">Campus</option>
            <option value="Todos">Todos</option>
            <option *ngFor="let campus of campus" [value]="campus.desc">{{ campus.desc }}</option>
          </select>
          <select formControlName="nivel">
            <option disabled selected [value]="null">Nivel</option>
            <option value="Todos">Todos</option>
            <option *ngFor="let nivel of niveles" [value]="nivel.desc">{{ nivel.desc }}</option>
          </select>
          <select formControlName="programa">
            <option disabled selected [value]="null">Programa</option>
            <option value="Todos">Todos</option>
            <option *ngFor="let programa of programas" [value]="programa.desc">{{ programa.desc }}</option>
          </select>
        </form>
      </div>
      <div (click)="showFilters = !showFilters"
        class="rounded-full bg-blue-500 h-12 w-12 text-white flex justify-center items-center shadow-lg fixed bottom-0 right-0 m-2 hover:bg-blue-700 cursor-pointer">
        <ion-icon [name]="showFilters? 'close' : 'funnel'" class="text-xl"></ion-icon>
      </div>
    </div>
  </div>
</ion-content>
